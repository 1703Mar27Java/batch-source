
/*CREATING TABLES*/

CREATE TABLE BEAR
(
    BEAR_ID       INTEGER NOT NULL,
    BEAR_NAME     VARCHAR2(160) NOT NULL,
    BEAR_TYPE_ID  NUMBER NOT NULL,
    BEAR_AGE      NUMBER NOT NULL,
    BEAR_WEIGHT   NUMBER NOT NULL,
    CAVE_ID       NUMBER NOT NULL,
    CONSTRAINT PK_BEAR    PRIMARY KEY  (BEAR_ID),
    CONSTRAINT CHK_AGE    CHECK (BEAR_AGE>0),
    CONSTRAINT CHK_WEIGHT CHECK (BEAR_WEIGHT>0)
);

CREATE TABLE BEAR_TYPE
(
  BEAR_TYPE_ID    INTEGER NOT NULL,
  BEAR_TYPE_NAME  VARCHAR2(160) NOT NULL,
  CONSTRAINT PK_BEAR_TYPE PRIMARY KEY (BEAR_TYPE_ID)
);

CREATE TABLE BEEHIVE
(
  BEEHIVE_ID      INTEGER NOT NULL,
  HIVE_WEIGHT     INTEGER DEFAULT 50 NOT NULL,
  CONSTRAINT PK_BEEHIVE PRIMARY KEY (BEEHIVE_ID)
);

CREATE TABLE CAVE
(
  CAVE_ID         INTEGER NOT NULL,
  CAVE_NAME       VARCHAR2(160) NOT NULL UNIQUE,
  MAX_BEARS       INTEGER DEFAULT 4 NOT NULL ,
  CONSTRAINT PK_CAVE PRIMARY KEY (CAVE_ID)
);

CREATE TABLE BEAR_BEEHIVE
(
  BEAR_ID         INTEGER NOT NULL,
  BEEHIVE_ID      INTEGER NOT NULL,
  CONSTRAINT PK_BEAR_BEEHIVE PRIMARY KEY (BEAR_ID, BEEHIVE_ID)
);

/*ADDING FOREIGN KEYS*/

ALTER TABLE BEAR ADD CONSTRAINT FK_BEAR_TYPE
  FOREIGN KEY (BEAR_TYPE_ID) REFERENCES BEAR_TYPE (BEAR_TYPE_ID);

ALTER TABLE BEAR ADD CONSTRAINT FK_CAVE_ID
  FOREIGN KEY (CAVE_ID) REFERENCES CAVE (CAVE_ID);
  
ALTER TABLE BEAR_BEEHIVE ADD CONSTRAINT FK_BEAR_ID
  FOREIGN KEY (BEAR_ID) REFERENCES BEAR (BEAR_ID);
  
ALTER TABLE BEAR_BEEHIVE ADD CONSTRAINT FK_BEEHIVE_ID
  FOREIGN KEY (BEEHIVE_ID) REFERENCES BEEHIVE (BEEHIVE_ID);
  
/*POPULATING THE TABLES*/
INSERT INTO CAVE          VALUES (1, 'POOHS HOME', 4);
INSERT INTO CAVE          VALUES (2, 'THE FOREST', DEFAULT);
INSERT INTO CAVE          VALUES (3, 'A CITY OF CAVES', 30);
INSERT INTO CAVE          VALUES (4, 'SMALL CAVE', 1);
INSERT INTO BEAR_TYPE     VALUES (1, 'FAT BEAR');
INSERT INTO BEAR_TYPE     VALUES (2, 'NOT A BEAR');
INSERT INTO BEAR_TYPE     VALUES (3, 'NICE BEAR');
INSERT INTO BEAR_TYPE     VALUES (4, 'EVIL BEAR');
INSERT INTO BEAR          VALUES (1, 'POOH', 1, 5, 20, 1);
INSERT INTO BEAR          VALUES (2, 'TIGGER', 2, 7, 25, 2);
INSERT INTO BEAR          VALUES (3, 'TEDDY', 3, 10, 21, 3);
INSERT INTO BEAR          VALUES (4, 'CTHULU', 4, 666, 666, 4);
INSERT INTO BEEHIVE       VALUES (1, DEFAULT);
INSERT INTO BEEHIVE       VALUES (2, DEFAULT);
INSERT INTO BEEHIVE       VALUES (3, DEFAULT);
INSERT INTO BEEHIVE       VALUES (4, DEFAULT);
INSERT INTO BEAR_BEEHIVE  VALUES (1, 1);
INSERT INTO BEAR_BEEHIVE  VALUES (1, 2);
INSERT INTO BEAR_BEEHIVE  VALUES (1, 3);
INSERT INTO BEAR_BEEHIVE  VALUES (2, 4);
INSERT INTO BEAR_BEEHIVE  VALUES (4, 1);
INSERT INTO BEAR_BEEHIVE  VALUES (4, 2);
INSERT INTO BEAR_BEEHIVE  VALUES (4, 3);
INSERT INTO BEAR_BEEHIVE  VALUES (4, 4);
INSERT INTO BEAR_BEEHIVE  VALUES (3, 2);